<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cow8k.stock.tiktok.mapper.TikTokShopMapper">

    <update id="updateTikTokShopByShopId">
        update t_tiktok_shop
        <set>
            <if test="shopName != null">shop_name = #{shopName},</if>
            <if test="appKey != null">app_key = #{appKey},</if>
            <if test="appSecret != null">app_secret = #{appSecret},</if>
            <if test="autoCode != null">auto_code = #{autoCode},</if>
            <if test="accessToken != null">access_token = #{accessToken},</if>
            <if test="accessTokenExpireTime != null">access_token_expire_time = #{accessTokenExpireTime},</if>
            <if test="refreshToken != null">refresh_token = #{refreshToken},</if>
            <if test="refreshTokenExpireTime != null">refresh_token_expire_time = #{refreshTokenExpireTime},</if>
        </set>
        where shop_id = #{shopId}
    </update>

    <select id="selectByShopId" resultType="TikTokShop">
        select id,
               shop_id,
               shop_name,
               app_key,
               app_secret,
               auth_code,
               access_token,
               access_token_expire_time,
               refresh_token,
               refresh_token_expire_time,
               create_time,
               update_time
        from t_tiktok_shop
        where shop_id = #{shopId}
    </select>

</mapper>
